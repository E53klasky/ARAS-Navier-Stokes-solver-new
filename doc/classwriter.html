<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Saras: writer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Saras
   </div>
   <div id="projectbrief">Finite&nbsp;Difference&nbsp;Solver&nbsp;for&nbsp;NSE&nbsp;and&nbsp;MHD&nbsp;Simulations</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classwriter-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">writer Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Class for all the global variables and functions related to writing output data of the solver.  
 <a href="classwriter.html#details">More...</a></p>

<p><code>#include &quot;<a class="el" href="writer_8h_source.html">lib/io/writer.h</a>&quot;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aaa2aca379999de81e3672ee88001f42b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwriter.html#aaa2aca379999de81e3672ee88001f42b">writer</a> (const <a class="el" href="classgrid.html">grid</a> &amp;mesh, std::vector&lt; <a class="el" href="classfield.html">field</a> &gt; &amp;wFields)</td></tr>
<tr class="memdesc:aaa2aca379999de81e3672ee88001f42b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor of the writer class.  <a href="#aaa2aca379999de81e3672ee88001f42b">More...</a><br/></td></tr>
<tr class="separator:aaa2aca379999de81e3672ee88001f42b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a018371b828a8659c4ac930d3ba1880d0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwriter.html#a018371b828a8659c4ac930d3ba1880d0">writeTarang</a> (real time)</td></tr>
<tr class="memdesc:a018371b828a8659c4ac930d3ba1880d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to write solution file in HDF5 format in parallel in the same manner as TARANG.  <a href="#a018371b828a8659c4ac930d3ba1880d0">More...</a><br/></td></tr>
<tr class="separator:a018371b828a8659c4ac930d3ba1880d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63a56c40f8c67b80f1d26aa09a286a30"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwriter.html#a63a56c40f8c67b80f1d26aa09a286a30">writeSolution</a> (real time)</td></tr>
<tr class="memdesc:a63a56c40f8c67b80f1d26aa09a286a30"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to write solution file in HDF5 format in parallel.  <a href="#a63a56c40f8c67b80f1d26aa09a286a30">More...</a><br/></td></tr>
<tr class="separator:a63a56c40f8c67b80f1d26aa09a286a30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8da78d2c011168389f27a4830e3600f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwriter.html#aa8da78d2c011168389f27a4830e3600f">writeRestart</a> (real time)</td></tr>
<tr class="memdesc:aa8da78d2c011168389f27a4830e3600f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to write restart file in HDF5 format in parallel.  <a href="#aa8da78d2c011168389f27a4830e3600f">More...</a><br/></td></tr>
<tr class="separator:aa8da78d2c011168389f27a4830e3600f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a73d01fdb58bad2378d9ab7ffe6379b03"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwriter.html#a73d01fdb58bad2378d9ab7ffe6379b03">outputCheck</a> ()</td></tr>
<tr class="memdesc:a73d01fdb58bad2378d9ab7ffe6379b03"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to create output folder if it does not exist.  <a href="#a73d01fdb58bad2378d9ab7ffe6379b03">More...</a><br/></td></tr>
<tr class="separator:a73d01fdb58bad2378d9ab7ffe6379b03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae02ca7e3638a36f216a2f7d7fad1d5b5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwriter.html#ae02ca7e3638a36f216a2f7d7fad1d5b5">initLimits</a> ()</td></tr>
<tr class="memdesc:ae02ca7e3638a36f216a2f7d7fad1d5b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to initialize the global and local limits for setting file views.  <a href="#ae02ca7e3638a36f216a2f7d7fad1d5b5">More...</a><br/></td></tr>
<tr class="separator:ae02ca7e3638a36f216a2f7d7fad1d5b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bcda6d5e73e51a98c9154dc0f8ddc86"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwriter.html#a0bcda6d5e73e51a98c9154dc0f8ddc86">copyData</a> (<a class="el" href="classfield.html">field</a> &amp;outField)</td></tr>
<tr class="memdesc:a0bcda6d5e73e51a98c9154dc0f8ddc86"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to copy data to a blitz array without pads.  <a href="#a0bcda6d5e73e51a98c9154dc0f8ddc86">More...</a><br/></td></tr>
<tr class="separator:a0bcda6d5e73e51a98c9154dc0f8ddc86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56deed7cd221edbba8212ab742485420"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwriter.html#a56deed7cd221edbba8212ab742485420">interpolateData</a> (<a class="el" href="classfield.html">field</a> &amp;outField)</td></tr>
<tr class="memdesc:a56deed7cd221edbba8212ab742485420"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to interpolate data to a blitz array without pads.  <a href="#a56deed7cd221edbba8212ab742485420">More...</a><br/></td></tr>
<tr class="separator:a56deed7cd221edbba8212ab742485420"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ae3584f5a9053f2b12645e4e59bd9a201"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae3584f5a9053f2b12645e4e59bd9a201"></a>
const <a class="el" href="classgrid.html">grid</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>mesh</b></td></tr>
<tr class="separator:ae3584f5a9053f2b12645e4e59bd9a201"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2edb2383916e289449bfcd1cd11912f7"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2edb2383916e289449bfcd1cd11912f7"></a>
std::vector&lt; <a class="el" href="classfield.html">field</a> &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>wFields</b></td></tr>
<tr class="separator:a2edb2383916e289449bfcd1cd11912f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a128b8a847d9acfa7506e9339c1a7f598"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a128b8a847d9acfa7506e9339c1a7f598"></a>
blitz::Array&lt; real, 3 &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>fieldData</b></td></tr>
<tr class="separator:a128b8a847d9acfa7506e9339c1a7f598"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4882dcba3e3c8544777e39e0db85c24"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac4882dcba3e3c8544777e39e0db85c24"></a>
std::vector&lt; hid_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>sourceDSpace</b></td></tr>
<tr class="separator:ac4882dcba3e3c8544777e39e0db85c24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1684a00b71d5602990fb870ec90401c6"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1684a00b71d5602990fb870ec90401c6"></a>
std::vector&lt; hid_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>targetDSpace</b></td></tr>
<tr class="separator:a1684a00b71d5602990fb870ec90401c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af55305edef097a1e3b127ddb96ee7bed"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af55305edef097a1e3b127ddb96ee7bed"></a>
std::vector&lt; blitz::TinyVector<br class="typebreak"/>
&lt; int, 3 &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>localSize</b></td></tr>
<tr class="separator:af55305edef097a1e3b127ddb96ee7bed"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Class for all the global variables and functions related to writing output data of the solver. </p>
<p>The computational data from the solver is written in HDF5 format in a .h5 file. The class allows for both collocated and staggered grid data to be written in separate output files. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="aaa2aca379999de81e3672ee88001f42b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">writer::writer </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classgrid.html">grid</a> &amp;&#160;</td>
          <td class="paramname"><em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="classfield.html">field</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>wFields</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor of the writer class. </p>
<p>The constructor initializes the variables and parameters for parallel file writing through HDF5</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mesh</td><td>is a const reference to the global data contained in the grid class </td></tr>
    <tr><td class="paramname">wField</td><td>is a vector of sfields to be written </td></tr>
  </table>
  </dd>
</dl>
<p>Initialize the common global and local limits for file writing</p>
<p>Create output directory if it doesn't exist </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a0bcda6d5e73e51a98c9154dc0f8ddc86"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void writer::copyData </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfield.html">field</a> &amp;&#160;</td>
          <td class="paramname"><em>outField</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function to copy data to a blitz array without pads. </p>
<p>In order to simplify the file views while writing to disk from memory for the restart file, the variables are copied into a local blitz array without the pads. </p>

</div>
</div>
<a class="anchor" id="ae02ca7e3638a36f216a2f7d7fad1d5b5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void writer::initLimits </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function to initialize the global and local limits for setting file views. </p>
<p>All the necessary limits of the local arrays with respect to the global array for setting the dataspace views for HDF5 are appropriately set here. </p>

</div>
</div>
<a class="anchor" id="a56deed7cd221edbba8212ab742485420"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void writer::interpolateData </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfield.html">field</a> &amp;&#160;</td>
          <td class="paramname"><em>outField</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function to interpolate data to a blitz array without pads. </p>
<p>The solution files are written after interpolating the data to cell centers. This function performs this task depending on the mesh configuration of the variable. </p>

</div>
</div>
<a class="anchor" id="a73d01fdb58bad2378d9ab7ffe6379b03"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void writer::outputCheck </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function to create output folder if it does not exist. </p>
<p>The function uses methods available in the sys/stat.h header to create an output folder if it does not exist Without this, the code used to give segmentation fault while attempting to write solution files </p>

</div>
</div>
<a class="anchor" id="aa8da78d2c011168389f27a4830e3600f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void writer::writeRestart </td>
          <td>(</td>
          <td class="paramtype">real&#160;</td>
          <td class="paramname"><em>time</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to write restart file in HDF5 format in parallel. </p>
<p>It opens the restart file in the output folder and all the processors write in parallel into the file. Unlike solution writing, the data is not interpolated and is written as is. The restart file is overwritten with each call to this function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">time</td><td>is a real value containing the time to be added as metadata to the restart file </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a63a56c40f8c67b80f1d26aa09a286a30"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void writer::writeSolution </td>
          <td>(</td>
          <td class="paramtype">real&#160;</td>
          <td class="paramname"><em>time</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to write solution file in HDF5 format in parallel. </p>
<p>It opens a file in the output folder and all the processors write in parallel into the file Before writing however, all the data is interpolated into the cell centers for ease of post-processing.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">time</td><td>is a real value containing the time to be used for naming the file </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a018371b828a8659c4ac930d3ba1880d0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void writer::writeTarang </td>
          <td>(</td>
          <td class="paramtype">real&#160;</td>
          <td class="paramname"><em>time</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to write solution file in HDF5 format in parallel in the same manner as TARANG. </p>
<p>TARANG writes solution files in folders within the output folder. This totally defeats the purpose of HDF5 data format and makes data processing more cumbersome. However, in the interest of maintaining backward compatibility, this feature is being added to Saras. Before writing the file, all the data is interpolated into the cell centers for ease of post-processing.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">time</td><td>is a real value containing the time to be used for naming the file </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>lib/io/<a class="el" href="writer_8h_source.html">writer.h</a></li>
<li>lib/io/<a class="el" href="writer_8cc.html">writer.cc</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Feb 6 2020 14:06:24 for Saras by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
